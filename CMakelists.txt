cmake_minimum_required(VERSION 3.22.1)

project(Inspite) #project name

set(BUILD_SHARED_LIBS ON)
set(SRC ${PROJECT_SOURCE_DIR}/src/)
set(LIB ${PROJECT_SOURCE_DIR}/lib)
set(SFML_LIB ${LIB}/SFML/lib)
# find_package(Freetype REQUIRED)

add_executable(${PROJECT_NAME}
# CMAKE CPP INCLUDE
${SRC}input.cpp
${SRC}obj.cpp
main.cpp
)
# find_package(glfw3 REQUIRED) #assuming you installed it somwhere
target_include_directories(
    ${PROJECT_NAME}
    PRIVATE ${PROJECT_SOURCE_DIR}/hed
    PRIVATE ${LIB}/SFML/include
)
if(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
	message("You're on Mac OS !")
elseif(${CMAKE_SYSTEM_NAME} MATCHES "Linux")

target_link_libraries(${PROJECT_NAME} 
        ${SFML_LIB}/libsfml-audio.a
        ${SFML_LIB}/libsfml-graphics.a
        ${SFML_LIB}/libsfml-system.a
        ${SFML_LIB}/libsfml-window.a
        gdi32
        opengl32
    )
	message("You're on Linux, using libXXX.a!")
elseif(${CMAKE_SYSTEM_NAME} MATCHES "Windows")
set(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS ON)
# https://stackoverflow.com/questions/4702732/the-program-cant-start-because-libgcc-s-dw2-1-dll-is-missing
# gilgamesh smiles upon you hardmath
add_definitions("-DSFML_STATIC")
set(CMAKE_EXE_LINKER_FLAGS "-static -static-libgcc -static-libstdc++")

target_link_libraries(
    ${PROJECT_NAME} 
        ${SFML_LIB}/libsfml-graphics-s.a
        ${SFML_LIB}/libsfml-window-s.a
        ${SFML_LIB}/libsfml-system-s.a
        winmm
        gdi32
        opengl32
        ${SFML_LIB}/libfreetype.a
    )
	message("You're on Windows !")
endif(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")


